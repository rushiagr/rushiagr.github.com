<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Amazon EC2 API with OpenStack - Developer Quick Start</title>
  <meta name="author" content="Rushi Agrawal">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://rushiagr.github.io/favicon.png" rel="icon">
  <link href="http://rushiagr.github.io/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://rushiagr.github.io/theme/js/modernizr-2.0.js"></script>
  <script src="http://rushiagr.github.io/theme/js/ender.js"></script>
  <script src="http://rushiagr.github.io/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://rushiagr.github.io/">Sense, and Simplicity</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>



<ul class="main-navigation">
    <li class="active">
    <a href="http://rushiagr.github.io/category/.html"></a>
    </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Amazon EC2 API with OpenStack - Developer Quick Start</h1>
      <p class="meta"><time datetime="2014-04-24T00:00:00" pubdate>Thu 24 April 2014</time></p>
</header>

  <div class="entry-content"><p>OpenStack has support for EC2 API, that is, you can fire Amazon's API against an OpenStack cloud and it will still work. This article just gets one started with using them locally against DevStack. It is more of a starter guide to a novice here.</p>
<p>Install and import boto</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">pip</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">boto</span>
</pre></div>


<p>Fire a DevStack with it's default settings. See <a href="www.rushiagr.com/blog/2014/04/03/openstack-in-an-hour-with-devstack">this post</a> for more information on it.</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">clone</span> <span class="n">http</span><span class="o">:</span><span class="c1">//github.com/openstack-dev/devstack</span>
<span class="n">cd</span> <span class="n">devstack</span><span class="o">/</span>
<span class="p">.</span><span class="o">/</span><span class="n">stack</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<p>Source openrc</p>
<div class="highlight"><pre><span class="n">source</span> <span class="n">openrc</span>
</pre></div>


<p>View all EC2 credentials available for the current user (here, <code>demo</code> user in <code>demo</code> tenant)</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">keystone</span> <span class="n">ec2</span><span class="o">-</span><span class="n">credentials</span><span class="o">-</span><span class="n">list</span> 
<span class="o">+----------------------------------+----------------------------------+----------------------------------+</span>
<span class="o">|</span>              <span class="n">tenant</span>              <span class="o">|</span>              <span class="n">access</span>              <span class="o">|</span>              <span class="n">secret</span>              <span class="o">|</span>
<span class="o">+----------------------------------+----------------------------------+----------------------------------+</span>
<span class="o">|</span> <span class="mi">5</span><span class="n">aedc40cfb3849e59b8302290a329476</span> <span class="o">|</span> <span class="mi">56</span><span class="n">cf58837b3d4d248f7dc0e4ae924b76</span> <span class="o">|</span> <span class="n">cfb8a0a55e5143aaada7d42df0d578ba</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">feb0ed016a4f4658a795cd168128402e</span> <span class="o">|</span> <span class="mi">247</span><span class="n">a7f6eca84452ab9c3be0db18ddd7b</span> <span class="o">|</span> <span class="mi">4</span><span class="n">d761ff6508c417abab5e523d46d60ac</span> <span class="o">|</span>
<span class="o">+----------------------------------+----------------------------------+----------------------------------+</span>
</pre></div>


<p>But which one is my current tenant? Find out the tenant ID from executing <code>keystone token-get</code> command. Other ways of doing this include opening a new shell, becoming an admin user there and running a <code>keystone tenant-list</code>, or getting the Tenant ID by logging in to Horizon dashboard.</p>
<p>Note the access and secret keys.
In my case, the tenant is <code>feb0ed016a4f4658a795cd168128402e</code>, access key is <code>247a7f6eca84452ab9c3be0db18ddd7b</code>, and secret key is <code>4d761ff6508c417abab5e523d46d60ac</code>.</p>
<p>Let's get started with the <code>boto</code> client for consuming AWS APIs. I prefer <code>ipython</code> shell, for its interactive features, but normal python shell is just fine too. (Install ipython as <code>sudo apt-get install ipython</code>).</p>
<p>Import necessary module</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span> <span class="n">import</span> <span class="n">boto</span><span class="p">.</span><span class="n">ec2</span>
</pre></div>


<p>Create a <code>region</code> object for use in next step.</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span> <span class="n">region</span> <span class="o">=</span> <span class="n">boto</span><span class="p">.</span><span class="n">ec2</span><span class="p">.</span><span class="n">regioninfo</span><span class="p">.</span><span class="n">RegionInfo</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;nova&quot;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="err">&#39;</span><span class="mf">127.0.0.1</span><span class="err">&#39;</span><span class="p">)</span>
</pre></div>


<p>where <code>nova</code> is the default availability zone, and endpoint is the IP of the interface on which your DevStack endpoints are created.</p>
<ul>
<li>installing and importing boto</li>
<li>keystone get keys</li>
<li>commands to connect via boto</li>
<li>get_all * for listing all resources</li>
<li>how to create and get instances out of reservations</li>
<li></li>
</ul></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Rushi Agrawal</span>
  </span>
<time datetime="2014-04-24T00:00:00" pubdate>Thu 24 April 2014</time>  <span class="categories">
    <a class="category" href="http://rushiagr.github.io/tag/.html"></a>
  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://rushiagr.github.io/blog/2014/04/24/amazon-ec2-api-with-openstack-developer-quick-start/" data-via="reeshi_india" data-counturl="http://rushiagr.github.io/blog/2014/04/24/amazon-ec2-api-with-openstack-developer-quick-start/" >Tweet</a>
  <div class="g-plusone" data-size="medium"></div>
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
</div>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://rushiagr.github.io/blog/2014/04/24/amazon-ec2-api-with-openstack-developer-quick-start/">Amazon EC2 API with OpenStack - Developer Quick Start</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://rushiagr.github.io/category/.html"></a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="http://rushiagr.github.io/tag/.html"></a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/rushiagr">@rushiagr</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://rushiagr.github.io/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'rushiagr',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://rushiagr.github.io/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="http://twitter.com/reeshi_india" target="_blank">twitter</a></li>
            <li><a href="http://github.com/rushiagr" target="_blank">github</a></li>
        </ul>
    </section>

<section>
    <p>Follow <a href="http://twitter.com/reeshi_india">@reeshi_india</a></p>
</section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2014  - Rushi Agrawal -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37074962-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37074962-1');
    ga('send', 'pageview');
</script>
	<script type="text/javascript">
	  var disqus_shortname = 'rushiagr';
          var disqus_identifier = '/blog/2014/04/24/amazon-ec2-api-with-openstack-developer-quick-start/';
          var disqus_url = 'http://rushiagr.github.io/blog/2014/04/24/amazon-ec2-api-with-openstack-developer-quick-start/';
          var disqus_title = 'Amazon EC2 API with OpenStack - Developer Quick Start';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</body>
</html>