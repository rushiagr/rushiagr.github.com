<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Apache mod_wsgi parallelization notes</title>
  <meta name="author" content="Rushi Agrawal">

  <link href="http://rushiagr.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
        title="Sense, and Simplicity RSS Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="/favicon.png" rel="icon">
  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">Sense, and Simplicity</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://rushiagr.github.io/feeds/all.rss.xml" rel="subscribe-rss">RSS</a></li>
</ul>



<ul class="main-navigation">
      <li><a href="/pages/about-me.html">About me</a></li>
    <li class="active">
    <a href="/category/tech.html">Tech</a>
    </li>
    <li >
    <a href="/category/thoughts.html">Thoughts</a>
    </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Apache mod_wsgi parallelization notes</h1>
      <p class="meta"><time datetime="2015-07-24T00:00:00" pubdate>Fri 24 July 2015</time></p>
</header>

  <div class="entry-content"><p>This is my notes on
<a href="https://code.google.com/p/modwsgi/wiki/ProcessesAndThreading">'Processes and Threading'</a>
doc by the author of mod_wsgi module of Apache. This blog post just serves as a 'quick refresher', and
is only useful if you have read the original document but it's been too long since you
read it :)</p>
<h2>Apache with mod_wsgi</h2>
<p>A Python application can run with multiple processes as well as multiple threads
with mod_wsgi.</p>
<h3>Prefork multiprocessing module</h3>
<p>Apache creates multiple processes, and each request is handled by one process.
A process only handles one request at a time.
This means, if you have set number of processes to 1, there will be only one
request handeled at a time overall.</p>
<h3>Worker multiprocessing module</h3>
<p>Multiple processes, and multiple threads in each processa.
Even if a process is handling a request, another thread in the same process
can handle one more request.
You might need some synchronization primitive to make sure multiple threads
of same process don't corrupt shared memory (only occurs when shared memory
is mutated)</p>
<h3>But GIL?</h3>
<p>Python GIL problem is largely alleviated with mod_wsgi since multiple processes
can handle requests, and GIL has impact ranging to only one process. One more
point to note is that the apache code which maps a URL/request to a wsgi application,
and the code which maps static file URLs to actual static files to serve is
written in C, and is free from GIL.</p>
<p>In the wsgi python code, two environment variables: 'wsgi.multithread' and
'wsgi.multiprocess' will define which of the above two modules are going to be
used.</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Rushi Agrawal</span>
  </span>
<time datetime="2015-07-24T00:00:00" pubdate>Fri 24 July 2015</time>  <span class="categories">
    <a class="category" href="/tag/cloud.html">cloud</a>
    <a class="category" href="/tag/cheatsheet.html">cheatsheet</a>
    <a class="category" href="/tag/notes.html">notes</a>
    <a class="category" href="/tag/apache.html">apache</a>
    <a class="category" href="/tag/server.html">server</a>
    <a class="category" href="/tag/devops.html">devops</a>
    <a class="category" href="/tag/operations.html">operations</a>
    <a class="category" href="/tag/systems.html">systems</a>
  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="/blog/2015/07/24/apache-mod_wsgi-parallelization-notes/" data-via="rushiagr" data-counturl="/blog/2015/07/24/apache-mod_wsgi-parallelization-notes/" >Tweet</a>
  <div class="g-plusone" data-size="medium"></div>
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/blog/2015/12/12/better-way-to-view-mysql-tables/">Better way to view MySQL tables</a>
      </li>
      <li class="post">
          <a href="/blog/2015/09/14/quick-justdial-scraper/">Quick JustDial scraper</a>
      </li>
      <li class="post">
          <a href="/blog/2015/09/10/openstack-keystone-with-cassandra-database-in-devstack/">OpenStack Keystone with Cassandra Database in DevStack</a>
      </li>
      <li class="post">
          <a href="/blog/2015/07/24/apache-mod_wsgi-parallelization-notes/">Apache mod_wsgi parallelization notes</a>
      </li>
      <li class="post">
          <a href="/blog/2015/06/07/docker-quick-start-notes/">Docker quick start notes</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="/category/tech.html">tech</a></li>
        <li><a href="/category/thoughts.html">thoughts</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="/tag/operations.html">operations</a>,    <a href="/tag/.html"></a>,    <a href="/tag/quickstart.html">quickstart</a>,    <a href="/tag/nosql.html">nosql</a>,    <a href="/tag/storage.html">storage</a>,    <a href="/tag/squid.html">squid</a>,    <a href="/tag/scraper.html">scraper</a>,    <a href="/tag/apt.html">apt</a>,    <a href="/tag/vim.html">vim</a>,    <a href="/tag/packaging.html">packaging</a>,    <a href="/tag/puppet.html">puppet</a>,    <a href="/tag/ec2.html">ec2</a>,    <a href="/tag/mysql.html">mysql</a>,    <a href="/tag/openstack.html">openstack</a>,    <a href="/tag/quicstart.html">quicstart</a>,    <a href="/tag/technology.html">technology</a>,    <a href="/tag/tempest.html">tempest</a>,    <a href="/tag/cloud.html">cloud</a>,    <a href="/tag/cassandra.html">cassandra</a>,    <a href="/tag/block-storage.html">block-storage</a>,    <a href="/tag/git.html">git</a>,    <a href="/tag/cli.html">cli</a>,    <a href="/tag/iscsi.html">iscsi</a>,    <a href="/tag/cache.html">cache</a>,    <a href="/tag/distributed.html">distributed</a>,    <a href="/tag/devops.html">devops</a>,    <a href="/tag/terminal.html">terminal</a>,    <a href="/tag/cheatsheet.html">cheatsheet</a>,    <a href="/tag/systems.html">systems</a>,    <a href="/tag/keystone.html">keystone</a>,    <a href="/tag/screen.html">screen</a>,    <a href="/tag/tutorial.html">tutorial</a>,    <a href="/tag/openid.html">openid</a>,    <a href="/tag/testing.html">testing</a>,    <a href="/tag/nontech.html">nontech</a>,    <a href="/tag/python.html">python</a>,    <a href="/tag/commandline.html">commandline</a>,    <a href="/tag/aws.html">aws</a>,    <a href="/tag/scalability.html">scalability</a>,    <a href="/tag/automation.html">automation</a>,    <a href="/tag/amazon.html">amazon</a>,    <a href="/tag/lxc.html">lxc</a>,    <a href="/tag/milestone.html">milestone</a>,    <a href="/tag/apache.html">apache</a>,    <a href="/tag/devstack.html">devstack</a>,    <a href="/tag/data.html">data</a>,    <a href="/tag/linux.html">linux</a>,    <a href="/tag/github.html">github</a>,    <a href="/tag/boto.html">boto</a>,    <a href="/tag/notes.html">notes</a>,    <a href="/tag/server.html">server</a>,    <a href="/tag/tech.html">tech</a>,    <a href="/tag/containers.html">containers</a>,    <a href="/tag/databases.html">databases</a>,    <a href="/tag/lvm.html">lvm</a>,    <a href="/tag/cinder.html">cinder</a>,    <a href="/tag/docker.html">docker</a>,    <a href="/tag/ubuntu.html">ubuntu</a>,    <a href="/tag/virtualization.html">virtualization</a>  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/rushiagr">@rushiagr</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = '/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'rushiagr',
              count: 5,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="http://rushiagr.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">RSS</a></li>
            <li><a href="http://twitter.com/rushiagr" target="_blank">twitter</a></li>
            <li><a href="http://github.com/rushiagr" target="_blank">github</a></li>
        </ul>
    </section>

<section>
    <p>Follow <a href="http://twitter.com/rushiagr">@rushiagr</a></p>
</section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2012-2015  - Rushi Agrawal -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37074962-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37074962-1');
    ga('send', 'pageview');
</script>
	<script type="text/javascript">
	  var disqus_shortname = 'rushiagr';
          var disqus_identifier = '/blog/2015/07/24/apache-mod_wsgi-parallelization-notes/';
          var disqus_url = '/blog/2015/07/24/apache-mod_wsgi-parallelization-notes/';
          var disqus_title = 'Apache mod_wsgi parallelization notes';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</body>
</html>